# SwaggerClient-php
API for Pay after delivery and Pay in 3 installments

This PHP package is automatically generated by the [Swagger Codegen](https://github.com/swagger-api/swagger-codegen) project:

- API version: v2
- Build package: io.swagger.codegen.languages.PhpClientCodegen

## Requirements

PHP 5.5 and later

## Installation & Usage
### Composer

To install the bindings via [Composer](http://getcomposer.org/), add the following to `composer.json`:

```
{
  "repositories": [
    {
      "type": "git",
      "url": "https://github.com//.git"
    }
  ],
  "require": {
    "/": "*@dev"
  }
}
```

Then run `composer install`

### Manual Installation

Download the files and include `autoload.php`:

```php
    require_once('/path/to/SwaggerClient-php/vendor/autoload.php');
```

## Tests

To run the unit tests:

```
composer install
./vendor/bin/phpunit
```

## Getting Started

Please follow the [installation procedure](#installation--usage) and then run the following:

```php
<?php
require_once(__DIR__ . '/vendor/autoload.php');

// Configure API key authorization: apikey
$config = Swagger\Client\Configuration::getDefaultConfiguration()->setApiKey('apikey', 'YOUR_API_KEY');
// Uncomment below to setup prefix (e.g. Bearer) for API key, if needed
// $config = Swagger\Client\Configuration::getDefaultConfiguration()->setApiKeyPrefix('apikey', 'Bearer');

$apiInstance = new Swagger\Client\Api\CancellationApi(
    // If you want use custom http client, pass your client which implements `GuzzleHttp\ClientInterface`.
    // This is optional, `GuzzleHttp\Client` will be used as default.
    new GuzzleHttp\Client(),
    $config
);
$item = new \Swagger\Client\Model\CancellationRequestV2Model(); // \Swagger\Client\Model\CancellationRequestV2Model | 

try {
    $result = $apiInstance->cancellationV2Post($item);
    print_r($result);
} catch (Exception $e) {
    echo 'Exception when calling CancellationApi->cancellationV2Post: ', $e->getMessage(), PHP_EOL;
}

?>
```

## Documentation for API Endpoints

All URIs are relative to *https://capayable-api.tritac.com*

Class | Method | HTTP request | Description
------------ | ------------- | ------------- | -------------
*CancellationApi* | [**cancellationV2Post**](docs/Api/CancellationApi.md#cancellationv2post) | **POST** /v2/cancellation | # Cancel creditcheck  How to cancel an creditcheck/order? If an invoice call has been done, do an invoice credit for the full amount of the order. If an invoice call has not been done yet you can do a cancellation call, like below.
*CreditCheckApi* | [**creditCheckV2Post**](docs/Api/CreditCheckApi.md#creditcheckv2post) | **POST** /v2/creditcheck | # Request credit check     You can perform a credit check on a user.If accepted, the order is final and is going to be paid on invoice.Remember to store the TransactionNumber of the response somewhere with the order, you’ll need it for the invoice follow up.                 The credit check counts as registering an order, so it has to be followed up by an invoice or a cancellation.If not, the order will remain open and may block the customer from doing another order with Capayable.                Note: the credit check on the live environment may take a while, so be sure to set longer timeouts (max 2 minutes). .    In the test environment, use the LastName ‘Refuse’ to get a refused response (&#x60;IsAccepted&#x60; &#x3D; &#x60;false&#x60;) with a random refuse reason.    In the production environment IsFinal should always be ‘true’. In your test environment, you can use ‘false’ while building your connection, as it will not actually register an order and therefore allow you to do multiple checks on the same address(and TransactionNumber will be empty).    If three installments is supported please use the new PaymentMethod property to select the correct payment method. The IsInThreeInstallments property is obsolete.    ## Refuse reason     (Ignore if IsAccepted&#x3D;true)  There are several possible reasons for refusing:  - &#x60;AMOUNT_EXCEEDS_LIMIT&#x60; &#x3D; 1 means the order amount is above this limit. Each shop has an order amount limit above which pay after delivery by Capayable is not available.  - &#x60;BALANCE_EXCEEDS_LIMIT&#x60;&#x3D; 2 means the order amount plus the balance of unpaid orders by the customer is above this limit. There is a limit on the unpaid sum of all orders with this shops or other shops using Capayable.   -  &#x60;NOT_CREDITWORTHY&#x60; &#x3D; 3 means the customer is not accepted for credit by this service.  Capayable uses services for the actual credit check (B2C: Experian, B2B: Graydon).   - &#x60;CREDITCHECK_UNAVAILABLE&#x60; &#x3D; 4 means the extern credit check service is not be available.  - &#x60;NOT_FOUND&#x60; &#x3D; 5 means the corporation could not be found based on its name and/or its address(B2B only).  - &#x60;ADDRESS_BLOCKED&#x60; &#x3D; 6: the invoice address is blocked by Capayable   - &#x60;TOO_YOUNG&#x60; &#x3D; 7: the customer is 18-  - &#x60;DIFFERENT_SHIPPING_ADDRESS&#x60; &#x3D; 8: for some shops, the shipping address must be the same as the invoice address  - &#x60;SHIPPING_ADDRESS_BLOCKED&#x60; &#x3D; 9: the shipping address is blocked by Capayable   - &#x60;IP_ADDRESS_BLOCKED&#x60; &#x3D; 10: the IP address is blocked by Capayable   - &#x60;COUNTRY_BLOCKED&#x60; &#x3D; 11: the country of the invoice address is blocked by Capayable   - &#x60;SHIPPING_COUNTRY_BLOCKED&#x60; &#x3D; 12: the country of the shipping address is blocked by Capayable   - &#x60;AMOUNT_TOO_LOW&#x60; &#x3D; 13: the invoice amount is to low. Each shop has a mimimum amount.  - &#x60;TOO_MANY_OPEN_INVOICES&#x60; &#x3D; 14: the customer has too still open invoices with Capyable  - &#x60;IP_ADDRESS_BLOCKED_MULTIPLE_ORDERS_WITHIN_24HRS&#x60; &#x3D; 15: for some shops, only one order per IP address is allowed in 24 hours.    In all cases the relevant contact info for the customer (or shop) is returned: the name of the company and a phone number.The customer can contact this number if he has questions about the refusal.  Get the translation of the refusereason by adding lang&#x3D;nl to the querystring in the request.
*InstallmentApi* | [**installmentV2Post**](docs/Api/InstallmentApi.md#installmentv2post) | **POST** /v2/installment | # Register first installment payment (own PSP only)    For ‘in three installments’ orders, register the first installment payment immediately after the creditcheck. Only use this if you don’t pay through Capayable but use your own PSP (option B above).
*InvoiceApi* | [**invoiceV2Post**](docs/Api/InvoiceApi.md#invoicev2post) | **POST** /v2/invoice | # Register invoice follow up    If the creditcheck succeeds, you can request a follow-up by Capayable on the payment of the invoice the webshop sends to the user. The webshop sent the invoice to the user. This call is just to notify that Capayable should follow up on it. Typically you do this Invoice call on shipping the products of the order.     Use the expected delivery date as invoice date, because from then on the customer should pay for delivery.    If the order is split into multiple shipments, do the invoice call for the entire order only on the last shipment, with the expected delivery date of that shipment as the invoice date.    ## PDF invoice    Capayable requires a PDF-copy of the invoice.  You can choose one of these options (&#x60;InvoicePdfSubmitType&#x60;):  - a. to provide a url to the invoice PDF in the invoice request   - b. to provide the invoice data in InvoicePdfData field (Capayable generates the PDF from this)   - c. If above are not possible for your shop, you can provide the invoice (PDF or text) via email.     ### a. Set invoice url  Set a full link to the PDF invoice in InvoicePdfUrl. Make sure the invoice file is not too large (max. 1 MB).     ### b. Set InvoicePdfData  Give the data of the invoice in the call. The data from the lines is presented in the invoice without extra processing,  so you have to set the correct formatting (do NOT set prices in cents for the invoice), the currency sign and provide lines for the subtotal and the total.  - ProductLines: order lines for each product  - TotalLines: for shipping costs, discounts, VAT and totals (isTotal &#x3D;true)    ### c. Send PDF invoice via email (BCC)  Either you include Capayable (&#x60;capayable-invoice-bcc@tritac.com&#x60;) as BCC in the order confirmation email you sent to the customer where the invoice as PDF is attached.  Or you can send a separate email to Capayable with the invoice PDF attached.If no PDF is attached, the email text body will be used as invoice and converted to PDF by the API.  The email is matched:  - the date (&#x60;InvoicePdfEmailSentDate&#x60;)  - the from email address (&#x60;InvoicePdfFromEmail&#x60;)  - the order reference in the subject (&#x60;InvoicePdfEmailSubject&#x60;). &#x60;InvoicePdfEmailSubject&#x60; does not have to match the entire subject, that is contained with the subject is sufficient.    E.g. subject &#x3D; \&quot;Order confirmation O-123 in yourshop.nl\&quot;, and &#x60;InvoicePdfEmailSubject&#x60; &#x3D; \&quot;O-123\&quot; is fine.    You have to send this email within an hour after the invoice request. It is also possible to send it earlier, for example around the time of the final creditcheck. Then, it will be matched after you’ve sent in the invoice request.
*InvoiceCreditApi* | [**invoiceCreditV2Post**](docs/Api/InvoiceCreditApi.md#invoicecreditv2post) | **POST** /v2/invoicecredit | # Register a return:  credit on invoice / refund  If a customer returns a product to the webshop, the shop can refund him.Therefore you can notify capayable of returns which result in a credit of the invoice.    If the invoice is ready (partially) paid, Capayable will do a regular (partial) refund. Otherwise the invoice is credited, so the customer has to pay less(or nothing). Either case is a concern for Capayable, not the shop.    You can do multiple invoice credit calls on a single invoice.The total amount can be somewhat larger than the original amount, so the shop can refund extra return shipping costs if desired.    Because Capayable starts reminding the customer after 2 weeks, returns after 14 days will NOT be accepted (Result &#x3D; &#x60;EXCEEDS_PERIOD_LIMIT&#x60;). So, when using Capayable pay after delivery, customer has 14 days (counting from last delivery date, sent to Capayable as &#x60;InvoiceDate&#x60;) to return (part of) his order.    ### (Partially) undeliverable  If an order can only be partially sent, or not at all (because for instance the product is out of stock), then follow the same logic as with cancellations after invoice:   - Do an invoice call for the entire order  - Provide the actual invoice by url or BCC email  - Register an invoice credit for the amount of undeliverable products.
*PartnerCancellationApi* | [**partnerCancellationV2Post**](docs/Api/PartnerCancellationApi.md#partnercancellationv2post) | **POST** /v2/partner/cancellation | 
*PartnerCreditCheckApi* | [**partnerCreditCheckV2Post**](docs/Api/PartnerCreditCheckApi.md#partnercreditcheckv2post) | **POST** /v2/partner/creditcheck | 
*PartnerInstallmentApi* | [**partnerInstallmentV2Post**](docs/Api/PartnerInstallmentApi.md#partnerinstallmentv2post) | **POST** /v2/partner/installment | 
*PartnerInvoiceApi* | [**partnerInvoiceV2Post**](docs/Api/PartnerInvoiceApi.md#partnerinvoicev2post) | **POST** /v2/partner/invoice | 
*PartnerInvoiceCreditApi* | [**partnerInvoiceCreditV2Post**](docs/Api/PartnerInvoiceCreditApi.md#partnerinvoicecreditv2post) | **POST** /v2/partner/invoicecredit | 
*PartnerRegistrationCheckApi* | [**partnerRegistrationCheckV2Post**](docs/Api/PartnerRegistrationCheckApi.md#partnerregistrationcheckv2post) | **POST** /v2/partner/registrationcheck | 
*RegistrationCheckApi* | [**registrationCheckV2Post**](docs/Api/RegistrationCheckApi.md#registrationcheckv2post) | **POST** /v2/registrationcheck | # Chamber of Commerce registration check  If you sell to businesses, the shop can do a registration check of the corporation’s chamber of commerce number. The API will return the address data if the number is found.  This option may or may not be available, dependent on your contract with Capayable, as it entails an extra cost.     Note: the CoC check on the live environment may take a while, so be sure to set longer timeouts (max 2 minutes).    Supported countries:  - Test environment: NL  - Live environment: NL


## Documentation For Models

 - [CancellationRequestV2Model](docs/Model/CancellationRequestV2Model.md)
 - [CancellationResult](docs/Model/CancellationResult.md)
 - [CreditCheckRequestV2Model](docs/Model/CreditCheckRequestV2Model.md)
 - [CreditCheckResult](docs/Model/CreditCheckResult.md)
 - [InstallmentRequestV2Model](docs/Model/InstallmentRequestV2Model.md)
 - [InstallmentResultModel](docs/Model/InstallmentResultModel.md)
 - [InvoiceCreditRequestV2Model](docs/Model/InvoiceCreditRequestV2Model.md)
 - [InvoiceCreditResult](docs/Model/InvoiceCreditResult.md)
 - [InvoicePdfDataModel](docs/Model/InvoicePdfDataModel.md)
 - [InvoicePdfDataProductLineModel](docs/Model/InvoicePdfDataProductLineModel.md)
 - [InvoicePdfDataTotalLineModel](docs/Model/InvoicePdfDataTotalLineModel.md)
 - [InvoiceRequestV2Model](docs/Model/InvoiceRequestV2Model.md)
 - [InvoiceResult](docs/Model/InvoiceResult.md)
 - [PartnerCancellationRequestV2Model](docs/Model/PartnerCancellationRequestV2Model.md)
 - [PartnerCreditCheckRequestV2Model](docs/Model/PartnerCreditCheckRequestV2Model.md)
 - [PartnerInstallmentRequestV2Model](docs/Model/PartnerInstallmentRequestV2Model.md)
 - [PartnerInvoiceCreditRequestV2Model](docs/Model/PartnerInvoiceCreditRequestV2Model.md)
 - [PartnerInvoiceRequestV2Model](docs/Model/PartnerInvoiceRequestV2Model.md)
 - [PartnerRegistrationCheckRequestV2Model](docs/Model/PartnerRegistrationCheckRequestV2Model.md)
 - [RegistrationCheckRequestV2Model](docs/Model/RegistrationCheckRequestV2Model.md)
 - [RegistrationCheckResultViewModel](docs/Model/RegistrationCheckResultViewModel.md)


## Documentation For Authorization


## apikey

- **Type**: API key
- **API key parameter name**: apikey
- **Location**: HTTP header


## Author




